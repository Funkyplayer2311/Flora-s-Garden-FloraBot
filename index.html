<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Discord Webhook Messenger</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #5865F2, #23272A);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
    }

    .wrapper {
      display: flex;
      flex-direction: row;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
      max-width: 1100px;
    }

    .container {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 30px;
      width: 100%;
      max-width: 500px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
      color: white;
      overflow-y: auto;
      max-height: 90vh;
      box-sizing: border-box;
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
    }

    label {
      margin-top: 15px;
      font-weight: bold;
      display: block;
    }

    select, textarea, input[type="file"] {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 8px;
      border: none;
      font-size: 1em;
      box-sizing: border-box;
    }

    select {
      background-color: #2c2f33;
      color: white;
      max-height: 150px;
      overflow-y: auto;
    }

    textarea {
      resize: vertical;
    }

    button {
      margin-top: 20px;
      width: 100%;
      padding: 12px;
      background-color: #7289DA;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #99aab5;
    }

    .preview {
      margin-top: 10px;
      text-align: center;
    }

    .preview img {
      max-width: 100%;
      border-radius: 10px;
      margin-top: 10px;
    }

    #messageDisplay div {
      background-color: #2c2f33;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    #messageDisplay strong {
      color: #ffffff;
    }

    #messageDisplay small {
      color: #b9bbbe;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="container">
      <h2>📨 Discord Webhook Messenger</h2>

      <label for="channel">Channel</label>
      <select id="channel" size="5"></select>

      <label for="message">Message</label>
      <textarea id="message" rows="4" placeholder="Type your message..."></textarea>

      <label for="image">Upload Image</label>
      <input type="file" id="image" accept="image/*" onchange="previewImage()"/>

      <div class="preview" id="preview"></div>

      <button onclick="sendMessage()">Send Message</button>
    </div>

    <div class="container">
      <h2>📜 Channel Message Viewer</h2>

      <label for="channelView">Select Channel to View</label>
      <select id="channelView" size="5"></select>

      <button onclick="loadMessages()">Load Messages</button>

      <div id="messageDisplay"></div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const webhooks = {
        "Rules": "https://discord.com/api/webhooks/1416727034654363658/XU9wgGlSZILNyeL1xwM7oM-NIe39_6Cn3EB8ys88gsuMfuL4M5ZiGaerpADhDuCE2oss",
        "announcements": "https://discord.com/api/webhooks/1416727705759514674/J9FN6RI9ch9VB8aPFX7ZppVJEbeZc_pCBr0HolsBhDPOWLRtySHcz69sEe4YCaJyO6pd",
        "Staff-Talk": "https://discord.com/api/webhooks/1416727864761520221/ar-tsBK5bSaT81xX8DSa0dQFmUC9nmbQatWlruzd77PCkC2RD5dZPE8inVOnOocSJRAS",
        "Staffs": "https://discord.com/api/webhooks/1343475548256600075/oFH9yT72dpc9MxIrtrN2l0t0XJpdmkP5ZO73dz9_i5fGejZ_gGNgTzydOPKapBdwLYlD",
        "Polls": "https://discord.com/api/webhooks/1416728215141220372/xByKVq9wcmT8wiH_OvQ0z8l4MPVg2ikZcmk6PE3w3RvGkYW77CRRSOLWBiKTqLoTbSmQ",
        "Staff-of-The-Month": "https://discord.com/api/webhooks/1416728325476450355/Us-8u9VbM4AlT9vEaJc2MekIr0s0bHbOvylreeScEkVB5YEakh98IRiqrUJflxgJXfa7",
        "Artist-of-The-Month": "https://discord.com/api/webhooks/1416728495152693278/wDPQW5CILM6ojBTqnpcTS0rdLv89M23Z86LqhVQ9oDMmVbf5NkKHjhoE-JHyFF7LDyPL",
        "Booster-Perks": "https://discord.com/api/webhooks/1416728638375854132/1LsLHqhscU1pnBp6q6mI6MrGafuGVt4LNqjwDqiqNJGnpzJOpXu2VKNxjFlKcRs2cd6r",
        "Boosts": "https://discord.com/api/webhooks/1416728845868072960/tSHDlrdNEIWUmEIWobDanUwy-RAAOCFdNTk9Ewc1GLXycEyS5ntjpHg2DB4wheCvDNud",
        "Chat": "https://discord.com/api/webhooks/1416728955943260233/MEjzeAuz0RQAyYyyEm8roqMTKV40RpFmjkY5iaHw0f7t6P3ebGK7zq5JXh1BivC8yonJ",
        "Media": "https://discord.com/api/webhooks/1416729075560480769/etnpD8Q-pmWwuekInkKn7wT63pG-5CMohacZoRFPrY6tid0nK0i4usN5i435WSy5Aut0",
        "Memes": "https://discord.com/api/webhooks/1416729191184990338/16zk5VaoFd46uQ7ItancJsOZdCW5SBUmVcPyed94mDu_Jsq8my73exp_GnPG5Wlf40e9",
        "Introductions": "https://discord.com/api/webhooks/1416729302355148942/Oz8xb_dQbcLUJFhU_0dP-L59gnsGHoH5eMJila86pGhfNKxw6rSE6YlO_vnwKR_MrYjX",
        "Pets": "https://discord.com/api/webhooks/1416729460270694442/4Y92uCNJUs3Xn0dW_zhP7fh-E32MtID-mDO8FghoVfpnfseZqCZ5D7LIgiwrUX1MxR3y",
        "Confession-Box": "https://discord.com/api/webhooks/1416729588696088667/oLHPjuB7n_DWCcB12ipjkdADdgdmVQuavW3zubOmabfXOgKwZZHxh-MtEMHy5Shax8-K",
        "Roles": "https://discord.com/api/webhooks/1416729734808604723/L-NqKUOBP0yrL9x4eoWHVKce3CygQ-PY2Jxp7oX8xutMGcsAc-oOuQUy3veYsJKD-SRb",
        "Reaction-Roles": "https://discord.com/api/webhooks/1416729863972192286/MdYPhcRpCg28dRO4oVf4qLp-rMNME9DwaQNcJ3_-AeedOTTmZGQ3eA-PBmPho0uzLxAe",
        "Art": "https://discord.com/api/webhooks/1416730057040465930/7DYzMv2i-fsSUbpa_rKWAJZIiz9MOnlc9vjRRAy6tAX6wWE393svgS6w91dF8vkbtSy_",
                "Art-Help": "https://discord.com/api/webhooks/1416730316831461509/q0JCKHGaVLPdSUbtytU-UykgY1GT-GglJ8vkuA9e1GDsKLLUTz3jE6q_heOYZ1rYdtfE",
        "Fan-Art": "https://discord.com/api/webhooks/1416730678912880730/ZbPHOC-hgI3XHIDyytYM1Nyg5wq0TSKKUHMlX3zFLrPEXlurF9Uv7AU7iRSZVMxd6nKB",
        "Emoji-Submits": "https://discord.com/api/webhooks/1416730861243469955/gDv2FxKT5hl2fNJE3_o19DA1-IXBQegkSxAUTJb2ZQ8jJ-EaoQDrAD1LecFbu2o-tVit",
        "Animations": "https://discord.com/api/webhooks/1416731070413672490/dKzBarserT8LHKJVSfn7PqGKMz-_9V2ieMWPwXvuEgpj3adbCchC5VFGIOZ_4pD90Jc0",
        "Flora-Art": "https://discord.com/api/webhooks/1416731247773876265/hAG7eNu-RrbYzLZSmy-qM4qYZCrcqk8Qdyu6aqqP7ysOjrWg6MWJy7fM8w32XYdV3fjM",
        "Staff-Chat": "https://discord.com/api/webhooks/1416734538511679518/s8_naQGddl4UD8eoybCmmxBh5cbnQu05xCE0-67bdwebZgs_MnIUKBoCxg3OK9Z0mIpq"
      };

      const select = document.getElementById("channel");
      const viewSelect = document.getElementById("channelView");

      for (const name in webhooks) {
        const option = document.createElement("option");
        option.value = webhooks[name];
        option.textContent = name;
        select.appendChild(option);

        const viewOption = document.createElement("option");
        viewOption.value = webhooks[name].split("/")[5]; // Extract channel ID
        viewOption.textContent = name;
        viewSelect.appendChild(viewOption);
      }
    });

    function previewImage() {
      const file = document.getElementById("image").files[0];
      const preview = document.getElementById("preview");
      preview.innerHTML = "";
      if (file) {
        const img = document.createElement("img");
        img.src = URL.createObjectURL(file);
        preview.appendChild(img);
      }
    }

    async function sendMessage() {
      const webhook = document.getElementById("channel").value;
      const message = document.getElementById("message").value;
      const imageFile = document.getElementById("image").files[0];

      if (!message && !imageFile) {
        alert("⚠️ Please enter a message or upload an image.");
        return;
      }

      const formData = new FormData();
      formData.append("content", message);
      if (imageFile) {
        formData.append("file", imageFile);
      }

      try {
        const response = await fetch(webhook, {
          method: "POST",
          body: formData
        });

        if (response.ok) {
          alert("✅ Message sent!");
        } else {
          alert("❌ Failed to send: " + response.status);
        }
      } catch (error) {
        alert("❌ Error: " + error.message);
      }
    }

    async function loadMessages() {
      const channelId = document.getElementById("channelView").value;
      const response = await fetch(`http://localhost:3000/messages/${channelId}`);
      const messages = await response.json();

      const display = document.getElementById("messageDisplay");
      display.innerHTML = messages.map(msg => `
        <div>
          <strong>${msg.author}</strong>: ${msg.content}
          <br><small>${new Date(msg.timestamp).toLocaleString()}</small>
        </div>
      `).join('');
    }
  </script>
</body>
</html>
